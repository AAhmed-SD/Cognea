[tool:pytest]
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
addopts = 
    --strict-markers
    --strict-config
    --cov=.
    --cov-report=term-missing
    --cov-report=html
    --cov-report=xml
    --cov-fail-under=80
    --asyncio-mode=auto
env = 
    SUPABASE_URL=https://test-project.supabase.co
    SUPABASE_ANON_KEY=test_anon_key_123456789
    SUPABASE_SERVICE_ROLE_KEY=test_service_role_key_123456789
    SUPABASE_JWT_KEY=test_jwt_secret_key_123456789
    OPENAI_API_KEY=sk-test_openai_api_key_123456789
    OPENAI_MODEL=gpt-4
    OPENAI_MAX_TOKENS=4000
    OPENAI_TEMPERATURE=0.7
    NOTION_CLIENT_ID=test_notion_client_id
    NOTION_CLIENT_SECRET=test_notion_client_secret
    NOTION_REDIRECT_URI=https://test.com/api/notion/callback
    NOTION_WEBHOOK_SECRET=test_notion_webhook_secret
    SECRET_KEY=test_secret_key_minimum_32_characters_long_for_testing
    JWT_ALGORITHM=HS256
    JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
    JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
    REDIS_URL=redis://localhost:6379
    REDIS_HOST=localhost
    REDIS_PORT=6379
    REDIS_DB=0
    REDIS_PASSWORD=
    SMTP_HOST=smtp.test.com
    SMTP_PORT=587
    SMTP_USER=test@test.com
    SMTP_PASSWORD=test_password
    EMAIL_FROM=noreply@test.com
    SENTRY_DSN=https://test@sentry.io/123456
    PROMETHEUS_PORT=9090
    LOG_LEVEL=INFO
    STRIPE_PUBLISHING_KEY=pk_test_123456789
    STRIPE_API_KEY=sk_test_123456789
    STRIPE_WEBHOOK_SECRET=whsec_test_123456789
    ENVIRONMENT=test
    DEBUG=true
    HOST=0.0.0.0
    PORT=8000
    WORKERS=1
    ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000
    ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
    ALLOWED_HEADERS=*
    RATE_LIMIT_REQUESTS_PER_MINUTE=1000
    RATE_LIMIT_REQUESTS_PER_HOUR=10000
    RATE_LIMIT_REQUESTS_PER_DAY=100000
    CACHE_TTL_SECONDS=60
    CACHE_MAX_SIZE=100
    MAX_FILE_SIZE=10485760
    ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf
    ENABLE_EMAIL_NOTIFICATIONS=false
    ENABLE_PUSH_NOTIFICATIONS=false
    NOTIFICATION_BATCH_SIZE=10
    ENABLE_COST_TRACKING=false
    COST_ALERT_THRESHOLD=100.00
    COST_ALERT_EMAIL=test@test.com
    DISABLE_AUTH=true
    DISABLE_RATE_LIMIT=true
    ENABLE_DEBUG_ENDPOINTS=true
    ENABLE_AI_FEATURES=false
    ENABLE_ANALYTICS=false
    ENABLE_NOTION_INTEGRATION=false
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
asyncio_mode = auto 