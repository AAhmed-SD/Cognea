============================= test session starts ==============================
platform darwin -- Python 3.13.3, pytest-8.4.0, pluggy-1.6.0 -- /Users/hadiqa/personal agent/venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/hadiqa/personal_agent_copy_2
configfile: pytest.ini
plugins: anyio-4.9.0, cov-6.2.1, mock-3.14.1, asyncio-1.0.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 398 items

test_app.py::test_root FAILED                                            [  0%]
test_app.py::test_signup_and_login PASSED                                [  0%]
test_app.py::test_plan_day PASSED                                        [  0%]
test_app.py::test_generate_flashcards_and_review PASSED                  [  1%]
test_app.py::test_get_latest_insights PASSED                             [  1%]
test_app.py::test_notion_status PASSED                                   [  1%]
test_comprehensive.py::TestAuthentication::test_root_endpoint PASSED     [  1%]
test_comprehensive.py::TestAuthentication::test_health_check FAILED      [  2%]
test_comprehensive.py::TestAuthentication::test_api_docs_accessible FAILED [  2%]
test_comprehensive.py::TestAuthentication::test_openapi_json_accessible FAILED [  2%]
test_comprehensive.py::TestTasks::test_get_tasks_unauthorized FAILED     [  2%]
test_comprehensive.py::TestTasks::test_create_task_unauthorized FAILED   [  3%]
test_comprehensive.py::TestTasks::test_get_tasks_statistics_unauthorized FAILED [  3%]
test_comprehensive.py::TestGoals::test_get_goals_unauthorized FAILED     [  3%]
test_comprehensive.py::TestGoals::test_create_goal_unauthorized FAILED   [  3%]
test_comprehensive.py::TestScheduleBlocks::test_get_schedule_blocks_unauthorized FAILED [  4%]
test_comprehensive.py::TestScheduleBlocks::test_create_schedule_block_unauthorized FAILED [  4%]
test_comprehensive.py::TestFlashcards::test_get_flashcards_unauthorized FAILED [  4%]
test_comprehensive.py::TestFlashcards::test_create_flashcard_unauthorized FAILED [  4%]
test_comprehensive.py::TestNotifications::test_get_notifications_unauthorized FAILED [  5%]
test_comprehensive.py::TestAIEndpoints::test_extract_tasks_unauthorized FAILED [  5%]
test_comprehensive.py::TestAIEndpoints::test_plan_day_unauthorized FAILED [  5%]
test_comprehensive.py::TestAIEndpoints::test_generate_insights_unauthorized FAILED [  5%]
test_comprehensive.py::TestSecurity::test_security_headers FAILED        [  6%]
test_comprehensive.py::TestSecurity::test_cors_headers PASSED            [  6%]
test_comprehensive.py::TestErrorHandling::test_404_endpoint PASSED       [  6%]
test_comprehensive.py::TestErrorHandling::test_invalid_json FAILED       [  6%]
test_comprehensive.py::TestDataValidation::test_invalid_email_format PASSED [  7%]
test_comprehensive.py::TestDataValidation::test_weak_password PASSED     [  7%]
test_comprehensive.py::TestRateLimiting::test_multiple_requests PASSED   [  7%]
test_database_operations.py::test_database_operations FAILED             [  7%]
test_database_operations.py::test_model_validation FAILED                [  8%]
test_simple_coverage.py::test_redis_client_basic FAILED                  [  8%]
test_simple_coverage.py::test_rate_limit_check PASSED                    [  8%]
test_simple_coverage.py::test_token_tracking FAILED                      [  8%]
test_simple_coverage.py::test_budget_limit_check PASSED                  [  9%]
test_simple_db.py::test_basic_connectivity FAILED                        [  9%]
tests/test_async_comprehensive.py::TestAuthentication::test_signup_success PASSED [  9%]
tests/test_async_comprehensive.py::TestAuthentication::test_login_success PASSED [  9%]
tests/test_async_comprehensive.py::TestAuthentication::test_login_invalid_credentials PASSED [ 10%]
tests/test_async_comprehensive.py::TestTasksEndpoints::test_create_task_unauthorized FAILED [ 10%]
tests/test_async_comprehensive.py::TestTasksEndpoints::test_get_tasks_unauthorized FAILED [ 10%]
tests/test_async_comprehensive.py::TestTasksEndpoints::test_update_task_unauthorized FAILED [ 10%]
tests/test_async_comprehensive.py::TestTasksEndpoints::test_delete_task_unauthorized FAILED [ 11%]
tests/test_async_comprehensive.py::TestGoalsEndpoints::test_create_goal_unauthorized FAILED [ 11%]
tests/test_async_comprehensive.py::TestGoalsEndpoints::test_get_goals_unauthorized FAILED [ 11%]
tests/test_async_comprehensive.py::TestGoalsEndpoints::test_update_goal_unauthorized FAILED [ 11%]
tests/test_async_comprehensive.py::TestScheduleBlocksEndpoints::test_create_schedule_block_unauthorized FAILED [ 12%]
tests/test_async_comprehensive.py::TestScheduleBlocksEndpoints::test_get_schedule_blocks_unauthorized FAILED [ 12%]
tests/test_async_comprehensive.py::TestFlashcardsEndpoints::test_create_flashcard_unauthorized FAILED [ 12%]
tests/test_async_comprehensive.py::TestFlashcardsEndpoints::test_get_flashcards_unauthorized FAILED [ 12%]
tests/test_async_comprehensive.py::TestFlashcardsEndpoints::test_review_flashcard_unauthorized FAILED [ 13%]
tests/test_async_comprehensive.py::TestAIEndpoints::test_plan_day_unauthorized FAILED [ 13%]
tests/test_async_comprehensive.py::TestAIEndpoints::test_generate_flashcards_unauthorized FAILED [ 13%]
tests/test_async_comprehensive.py::TestAIEndpoints::test_get_insights_unauthorized FAILED [ 13%]
tests/test_async_comprehensive.py::TestNotificationsEndpoints::test_create_notification_unauthorized FAILED [ 14%]
tests/test_async_comprehensive.py::TestNotificationsEndpoints::test_get_notifications_unauthorized FAILED [ 14%]
tests/test_async_comprehensive.py::TestHealthAndMonitoring::test_health_check FAILED [ 14%]
tests/test_async_comprehensive.py::TestHealthAndMonitoring::test_root_endpoint PASSED [ 14%]
tests/test_async_comprehensive.py::TestRateLimiting::test_rate_limiting PASSED [ 15%]
tests/test_async_comprehensive.py::TestErrorHandling::test_404_endpoint PASSED [ 15%]
tests/test_async_comprehensive.py::TestErrorHandling::test_invalid_json FAILED [ 15%]
tests/test_async_comprehensive.py::TestDatabaseOperations::test_database_connection PASSED [ 15%]
tests/test_async_comprehensive.py::TestSecurity::test_security_headers FAILED [ 16%]
tests/test_async_comprehensive.py::TestSecurity::test_cors_headers PASSED [ 16%]
tests/test_enhanced_error_handling.py::TestErrorCategorization::test_network_error_categorization PASSED [ 16%]
tests/test_enhanced_error_handling.py::TestErrorCategorization::test_timeout_error_categorization FAILED [ 16%]
tests/test_enhanced_error_handling.py::TestErrorCategorization::test_validation_error_categorization PASSED [ 17%]
tests/test_enhanced_error_handling.py::TestErrorCategorization::test_permission_error_categorization PASSED [ 17%]
tests/test_enhanced_error_handling.py::TestErrorCategorization::test_resource_error_categorization PASSED [ 17%]
tests/test_enhanced_error_handling.py::TestErrorCategorization::test_external_service_error_categorization PASSED [ 17%]
tests/test_enhanced_error_handling.py::TestBackgroundWorkers::test_worker_initialization FAILED [ 18%]
tests/test_enhanced_error_handling.py::TestBackgroundWorkers::test_task_enqueue FAILED [ 18%]
tests/test_enhanced_error_handling.py::TestBackgroundWorkers::test_task_processing_success FAILED [ 18%]
tests/test_enhanced_error_handling.py::TestBackgroundWorkers::test_task_processing_failure FAILED [ 18%]
tests/test_enhanced_error_handling.py::TestBackgroundWorkers::test_worker_health_check FAILED [ 19%]
tests/test_enhanced_error_handling.py::TestBackgroundWorkers::test_worker_metrics FAILED [ 19%]
tests/test_enhanced_error_handling.py::TestBackgroundTaskManager::test_task_metrics_initialization PASSED [ 19%]
tests/test_enhanced_error_handling.py::TestBackgroundTaskManager::test_task_metrics_recording PASSED [ 19%]
tests/test_enhanced_error_handling.py::TestBackgroundTaskManager::test_task_metrics_summary PASSED [ 20%]
tests/test_enhanced_error_handling.py::TestBackgroundTaskManager::test_background_task_decorator FAILED [ 20%]
tests/test_enhanced_error_handling.py::TestBackgroundTaskManager::test_background_task_decorator_with_error FAILED [ 20%]
tests/test_enhanced_error_handling.py::TestBackgroundTaskManager::test_task_manager_health_status FAILED [ 20%]
tests/test_enhanced_error_handling.py::TestNotionSyncManager::test_sync_direction_enum PASSED [ 21%]
tests/test_enhanced_error_handling.py::TestNotionSyncManager::test_conflict_resolution_model PASSED [ 21%]
tests/test_enhanced_error_handling.py::TestNotionSyncManager::test_recoverable_error_detection FAILED [ 21%]
tests/test_enhanced_error_handling.py::TestNotionSyncManager::test_content_merging FAILED [ 21%]
tests/test_enhanced_error_handling.py::TestNotionSyncManager::test_sync_health_status FAILED [ 22%]
tests/test_enhanced_error_handling.py::TestErrorHandler::test_api_error_classes PASSED [ 22%]
tests/test_enhanced_error_handling.py::TestErrorHandler::test_error_categorization FAILED [ 22%]
tests/test_enhanced_error_handling.py::TestErrorHandler::test_error_tracker PASSED [ 22%]
tests/test_enhanced_error_handling.py::TestRateLimitingScenarios::test_rate_limit_error_handling FAILED [ 23%]
tests/test_enhanced_error_handling.py::TestNetworkFailureRecovery::test_network_error_recovery PASSED [ 23%]
tests/test_enhanced_error_handling.py::TestNetworkFailureRecovery::test_exponential_backoff PASSED [ 23%]
tests/test_models_basic.py::TestUserModels::test_user_create_valid PASSED [ 23%]
tests/test_models_basic.py::TestUserModels::test_user_response_valid PASSED [ 24%]
tests/test_models_basic.py::TestUserModels::test_user_update_partial PASSED [ 24%]
tests/test_models_basic.py::TestTaskModels::test_task_create_valid PASSED [ 24%]
tests/test_models_basic.py::TestTaskModels::test_task_create_minimal PASSED [ 24%]
tests/test_models_basic.py::TestTaskModels::test_task_update_partial PASSED [ 25%]
tests/test_models_basic.py::TestTaskModels::test_task_full_model PASSED  [ 25%]
tests/test_models_basic.py::TestTaskModels::test_task_priority_levels PASSED [ 25%]
tests/test_models_basic.py::TestTaskModels::test_task_status_transitions PASSED [ 25%]
tests/test_models_basic.py::TestGoalModels::test_goal_create_valid PASSED [ 26%]
tests/test_models_basic.py::TestGoalModels::test_goal_create_with_metrics PASSED [ 26%]
tests/test_models_basic.py::TestGoalModels::test_goal_update_partial PASSED [ 26%]
tests/test_models_basic.py::TestGoalModels::test_goal_full_model PASSED  [ 26%]
tests/test_models_basic.py::TestGoalModels::test_goal_validation PASSED  [ 27%]
tests/test_models_basic.py::TestScheduleBlockModels::test_schedule_block_create_valid PASSED [ 27%]
tests/test_models_basic.py::TestScheduleBlockModels::test_schedule_block_create_recurring PASSED [ 27%]
tests/test_models_basic.py::TestScheduleBlockModels::test_schedule_block_update_partial PASSED [ 27%]
tests/test_models_basic.py::TestScheduleBlockModels::test_schedule_block_full_model PASSED [ 28%]
tests/test_models_basic.py::TestScheduleBlockModels::test_schedule_block_validation PASSED [ 28%]
tests/test_models_basic.py::TestNotificationModels::test_notification_create_valid PASSED [ 28%]
tests/test_models_basic.py::TestNotificationModels::test_notification_create_with_repeat PASSED [ 28%]
tests/test_models_basic.py::TestNotificationModels::test_notification_full_model PASSED [ 29%]
tests/test_models_basic.py::TestNotificationModels::test_notification_types PASSED [ 29%]
tests/test_models_basic.py::TestNotificationModels::test_notification_categories PASSED [ 29%]
tests/test_models_basic.py::TestSubscriptionModels::test_subscription_create_valid PASSED [ 29%]
tests/test_models_basic.py::TestSubscriptionModels::test_subscription_full_model PASSED [ 30%]
tests/test_models_basic.py::TestSubscriptionModels::test_subscription_status_values PASSED [ 30%]
tests/test_models_basic.py::TestTextGenerationModels::test_text_generation_request_valid PASSED [ 30%]
tests/test_models_basic.py::TestTextGenerationModels::test_text_generation_request_minimal PASSED [ 30%]
tests/test_models_basic.py::TestTextGenerationModels::test_text_generation_response_valid PASSED [ 31%]
tests/test_models_basic.py::TestTextGenerationModels::test_text_generation_validation PASSED [ 31%]
tests/test_models_basic.py::TestTextGenerationModels::test_text_generation_edge_cases PASSED [ 31%]
tests/test_models_basic.py::TestModelSerialization::test_user_serialization PASSED [ 31%]
tests/test_models_basic.py::TestModelSerialization::test_task_serialization PASSED [ 32%]
tests/test_models_comprehensive.py::TestUserModels::test_user_create_valid PASSED [ 32%]
tests/test_models_comprehensive.py::TestUserModels::test_user_create_invalid_email PASSED [ 32%]
tests/test_models_comprehensive.py::TestUserModels::test_user_create_short_password PASSED [ 32%]
tests/test_models_comprehensive.py::TestUserModels::test_user_login_valid PASSED [ 33%]
tests/test_models_comprehensive.py::TestUserModels::test_user_update_valid PASSED [ 33%]
tests/test_models_comprehensive.py::TestUserModels::test_user_update_partial PASSED [ 33%]
tests/test_models_comprehensive.py::TestUserModels::test_user_model_valid PASSED [ 33%]
tests/test_models_comprehensive.py::TestUserModels::test_user_model_serialization PASSED [ 34%]
tests/test_models_comprehensive.py::TestTaskModels::test_task_create_valid PASSED [ 34%]
tests/test_models_comprehensive.py::TestTaskModels::test_task_create_minimal PASSED [ 34%]
tests/test_models_comprehensive.py::TestTaskModels::test_task_create_invalid_priority PASSED [ 34%]
tests/test_models_comprehensive.py::TestTaskModels::test_task_update_valid PASSED [ 35%]
tests/test_models_comprehensive.py::TestTaskModels::test_task_model_valid PASSED [ 35%]
tests/test_models_comprehensive.py::TestTaskModels::test_task_status_enum PASSED [ 35%]
tests/test_models_comprehensive.py::TestTaskModels::test_priority_level_enum PASSED [ 35%]
tests/test_models_comprehensive.py::TestGoalModels::test_goal_create_valid PASSED [ 36%]
tests/test_models_comprehensive.py::TestGoalModels::test_goal_create_minimal PASSED [ 36%]
tests/test_models_comprehensive.py::TestGoalModels::test_goal_update_valid PASSED [ 36%]
tests/test_models_comprehensive.py::TestGoalModels::test_goal_model_valid PASSED [ 36%]
tests/test_models_comprehensive.py::TestGoalModels::test_goal_status_enum PASSED [ 37%]
tests/test_models_comprehensive.py::TestScheduleBlockModels::test_schedule_block_create_valid PASSED [ 37%]
tests/test_models_comprehensive.py::TestScheduleBlockModels::test_schedule_block_create_minimal PASSED [ 37%]
tests/test_models_comprehensive.py::TestScheduleBlockModels::test_schedule_block_update_valid PASSED [ 37%]
tests/test_models_comprehensive.py::TestScheduleBlockModels::test_schedule_block_model_valid PASSED [ 38%]
tests/test_models_comprehensive.py::TestNotificationModels::test_notification_create_valid PASSED [ 38%]
tests/test_models_comprehensive.py::TestNotificationModels::test_notification_create_minimal PASSED [ 38%]
tests/test_models_comprehensive.py::TestNotificationModels::test_notification_model_valid PASSED [ 38%]
tests/test_models_comprehensive.py::TestNotificationModels::test_notification_type_enum PASSED [ 39%]
tests/test_models_comprehensive.py::TestSubscriptionModels::test_subscription_create_valid PASSED [ 39%]
tests/test_models_comprehensive.py::TestSubscriptionModels::test_subscription_model_valid PASSED [ 39%]
tests/test_models_comprehensive.py::TestSubscriptionModels::test_subscription_status_enum PASSED [ 39%]
tests/test_models_comprehensive.py::TestTextModels::test_text_generation_request_valid PASSED [ 40%]
tests/test_models_comprehensive.py::TestTextModels::test_text_generation_request_defaults PASSED [ 40%]
tests/test_models_comprehensive.py::TestTextModels::test_text_generation_response_valid PASSED [ 40%]
tests/test_models_comprehensive.py::TestModelEdgeCases::test_user_empty_name PASSED [ 40%]
tests/test_models_comprehensive.py::TestModelEdgeCases::test_task_long_title PASSED [ 41%]
tests/test_models_comprehensive.py::TestModelEdgeCases::test_schedule_block_invalid_times PASSED [ 41%]
tests/test_models_comprehensive.py::TestModelEdgeCases::test_text_generation_high_temperature PASSED [ 41%]
tests/test_models_comprehensive.py::TestModelEdgeCases::test_text_generation_negative_tokens PASSED [ 41%]
tests/test_models_comprehensive.py::TestModelSerialization::test_user_serialization PASSED [ 42%]
tests/test_models_comprehensive.py::TestModelSerialization::test_task_serialization PASSED [ 42%]
tests/test_models_comprehensive.py::TestModelSerialization::test_goal_serialization PASSED [ 42%]
tests/test_models_comprehensive.py::TestModelJSONSerialization::test_user_json_serialization PASSED [ 42%]
tests/test_models_comprehensive.py::TestModelJSONSerialization::test_task_json_serialization PASSED [ 43%]
tests/test_models_comprehensive.py::TestModelJSONSerialization::test_goal_json_serialization PASSED [ 43%]
tests/test_notion_integration.py::TestNotionClient::test_notion_client_initialization PASSED [ 43%]
tests/test_notion_integration.py::TestNotionClient::test_notion_client_missing_api_key PASSED [ 43%]
tests/test_notion_integration.py::TestNotionFlashcardGenerator::test_flashcard_generator_initialization PASSED [ 44%]
tests/test_notion_integration.py::TestNotionFlashcardGenerator::test_create_flashcard_prompt PASSED [ 44%]
tests/test_notion_integration.py::TestNotionFlashcardGenerator::test_parse_ai_response PASSED [ 44%]
tests/test_notion_integration.py::TestNotionFlashcardGenerator::test_extract_key_concepts PASSED [ 44%]
tests/test_notion_integration.py::TestNotionSyncManager::test_sync_manager_initialization PASSED [ 45%]
tests/test_notion_integration.py::TestNotionSyncManager::test_create_notion_content_from_flashcards PASSED [ 45%]
tests/test_notion_integration.py::test_notion_integration_end_to_end 